import { db } from "@peated/server/db";
import { entityTombstones } from "@peated/server/db/schema";
import waitError from "@peated/server/lib/test/waitError";
import { routerClient } from "@peated/server/orpc/router";

describe("GET /badges/:id", () => {
  test("get badge by id", async ({ fixtures }) => {
    const badge = await fixtures.Badge();

    const data = await routerClient.badgeById(badge.id);
    expect(data.id).toEqual(badge.id);
  });

  test("errors on invalid badge", async () => {
    const err = await waitError(routerClient.badgeById(1));
    expect(err).toMatchInlineSnapshot();
  });
});